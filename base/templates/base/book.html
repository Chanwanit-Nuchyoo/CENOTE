{% extends 'main.html' %}
{% load static %}
{% block content %}
<nav class="navbar navbar-expand-custom navbar-mainbg">
    <a class="navbar-brand navbar-logo" href="{% url 'home' %}"><img class ='Logoo'src="{% static 'base/Logoo.png' %}"></a>
    <button class="navbar-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-bars text-white"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
            <div class="hori-selector"><div class="left"></div><div class="right"></div></div>
            <li class="nav-item ">
                <a class="nav-link" href="{% url 'home' %}"><i class="fas fa-home"></i>HOME</a>
            </li>
            <li class="nav-item ">
                <a class="nav-link " href="{% url 'open' %}"><i class="fas fa-th-large"></i>categories</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="{% url 'book' %}"><i class="fas fa-book-open"></i></i>notebook</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0);"><i class="fas fa-question-circle"></i>Q & A</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="javascript:void(0);"><i class="fas fa-history"></i>Timeline</a>
            </li>
            <li class="nav-item">
                {% if not request.user.is_authenticated %}
                <a class="nav-link" href="{% url 'loginview' %}"><i class="fas fa-user-alt"></i>Log In / Sign In</a>
                {% else %}
                <a class="nav-link" href="{% url 'logoutview' %}"><i class="fas fa-user-alt"></i>{{request.user.username}}</a>
                {% endif %}
                
            </li>
        </ul>
    </div>
    <div class ="search-box">
        <input class="search-txt" type = "text" name="" placeholder="Type to search">
        <a class ="search-btn" href ="#">
            <i class="fas fa-search"></i>
        </a>
        </div>
</nav>
<div class="header-book">
    <div class="box-rank">
        <p>Monthly Ranking</p> 
        <div class="crown"></div>
        <div class="box-peo">
            <div class = "pu1"></div>
            <div class = "pu2"></div>
            <div class = "line"></div>
            <div class = "rainbow1"></div>
            <div class = "rainbow2"></div>
            <div class = "cloud1"></div>
            <div class = "cloud2"></div>
            <div class = "cloud3"></div>
            <div class = "cloud4"></div>
            <div class="col-1">
                <h1>{{rank2.user.username}}</h1> 
                <a href=""><div class="img-col1_3"></div></a>
                <h2>{{rank2.title}} | {{rank1.category}}</h2> 
                <div class = "small1"></div>
                <div class = "small2"></div>
                <div class = "eye"></div>
                <div class = "heart">
                    <i class="fa-regular fa-heart"></i>
                </div>
                <h3>{{rank2.view_count}}</h3> 
                <h4>{{rank2.likes.count}}</h4> 
                <div class="rank2"></div>
            </div>

            <div class="col-2">
                <h1>{{rank1.user.username}}</h1> 
                <a href=""><div class="img-col1_3"></div></a>
               <h2>{{rank1.title}} | {{rank2.category}}</h2> 
               <div class = "small1"></div>
               <div class = "small2"></div>
               <div class = "eye"></div>
               <div class = "heart">
                <i class="fa-regular fa-heart"></i>
            </div>
                <h3>{{rank1.view_count}}</h3> 
                <h4>{{rank1.likes.count}}</h4> 
               <div class="rank1"></div>
            </div>

            <div class="col-3">
                <h1>{{rank3.user.username}}</h1> 
                <div class="rank3"></div>
                <a href=""><div class="img-col1_3"></div></a>
                <h2>{{rank3.title}} | {{rank2.category}}</h2> 
                <div class = "small1"></div>
                <div class = "small2"></div>
                <div class = "eye"></div>
                <div class = "heart">
                    <i class="fa-regular fa-heart"></i>
                </div>
                <h3>{{rank3.view_count}}</h3> 
                <h4>{{rank3.likes.count}}</h4> 
                <div class="rank3"></div>
            </div>
        </div>

        <div class="box-product">
            
            <!-- ลูปแต่ละ note จาก book view -->
            <div class="row">
            
            
            {% for n in page.object_list %}
            <div class='col-lg-3 mt-1 mb-3'>
                <a href="{% url 'note_view' id=n.pk %}"><div class="img-box"><img src="{{n.cover.url}}" width="250" height="270" style="border-radius: 10px;"></div></a>
                <div class="product">
                    <h4>
                            {{n.title}}  
                    </h4>
                    <h5>
                            โดย : {{n.user}}
                    </h5>
                    <div class = "eye-product"><a href=""><i class="fa-regular fa-eye"></i></a><small>{{n.view_count}}</small></div>
                    <div class = "heart-product"><a href="{% url 'like1' noteid=n.id %}"><i class="fa-regular fa-heart"></i></a><small>{{n.likes.all.count}}</small></div>
                    <div class = "chat-product"><a href=""><i class="fa-regular fa-comment-dots"></i></a></div>
                </div>
                
            </div>
            {% endfor %}
            </div>
            
            <!-- โชว์เลขจำนวนโน๊ตที่มี-->
            <h3>Total number of books: {{ count }} , page number : {{page.number}}</h3>
            
            <!-- <ul class ="pagination">
                {% if page.has_previous %}
                <li class="page-item">
                    <a href="{% url 'book' %}?page={{ page.previous_page_number }}">Previous Page</a>
                </li>
                {% endif %}
                {% for i in note_paginator.page_range %}
                <h3>{{i}}</h3>
                    <li class="page-item {% if i == page_num %} active {% endif %}">
                        <a class="page-link" href="{% url 'book' %}?page={{ i }}">{{i}}</a>
                    </li>
                {% endfor %}
                {% if page.has_next %}
                <li class="page-item">
                    <a href="{% url 'book' %}?page={{ page.next_page_number }}">Next Page</a>
                </li>
                {% endif %}
            </ul> -->
        
            <ul class="pagination">
                {% if page_object.has_previous %}
                <li class="page-item"><a class="page-link" href="{% url 'book' %}?page={{ page_object.previous_page_number }}">←</a></li>
                {% endif %}
                {% for i in page_object.adjusted_elided_pages %}
                    
                    {% if i == page_object.paginator.ELLIPSIS %}
                        {{i}}
                    {% else %}
                    <li class="page-item {% if page_object.number == i %}active{% endif %}">
                    <a class="page-link" href="{% url 'book'%}?page={{ i }}" class="{% if i == page_object.number %}page.number{% endif %}">{{i}}</a>
                </li>
                {% endif %}
                {% endfor %}
                {% if page_object.has_next %}
                <li class="page-item"><a class="page-link" href="{% url 'book' %}?page={{ page_object.next_page_number }}">→</a></li>
                {% endif %}
            </ul>

            <!--Page version 1 ไปได้แค่หน้าหลัง -->
            <!--ปุ่มกดไปpageหน้าหลัง-->
            <!-- <div class ="page-links">
                {% if page.has_previous %}
                    <a href="{% url 'book' %}?page={{ page.previous_page_number}}">Previous Page</a>
                {% endif %}
                {% if page.has_next %}
                    <a href="{% url 'book' %}?page={{ page.next_page_number}}">Next Page</a>
                {% endif %} -->
                
            

            <div class = "menu" id = "sort-bar"></div>
            <button class ="btn-2"><div class = "icon"><i class="fa-solid fa-clock-rotate-left"></i></div><h1>Recent<h1></button>
            <button class ="btn-3"><div class = "icon"><i class="fa-regular fa-eye"></i></div><h2>View<h2></button>
            <button class ="btn-4"><div class = "icon"><i class="fa-regular fa-heart"></i></div><h3>Like<h3></button>
        
         
    </div>
</div>
</div>  
<div class="loader-wrapper"></div>
{% endblock %}